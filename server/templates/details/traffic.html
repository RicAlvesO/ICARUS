{% extends "utils/base.html" %}

{% block title %}Traffic Detail{% endblock %}

{% block content %}
<h2>Traffic: {{ traffic.id }}</h2>

<table class="table table-bordered">
  {% for key, value in traffic.items() %}
  <tr>
    <th>{{ key }}</th>
    <td>{{ value }}</td>
  </tr>
  {% endfor %}
</table>

<hr>
<div class="row align-items-center" style="min-height: 400px;">
  <!-- Source Column -->
  <div class="col-md-5 d-flex align-items-center">
    <div class="w-100">
      <h4>Source: <a href="/data/observables/{{ source.id }}" class="btn-link">{{ source.id }}</a></h4>
      <div class="table-responsive">
        <table id="sourceTable" class="table table-sm table-striped table-bordered">
          <tbody>
            {% for key, value in source.items() %}
            <tr>
              <th>{{ key }}</th>
              <td>{{ value }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Relationship Type + Arrow -->
  <div class="col-md-2 d-flex flex-column align-items-center justify-content-center text-center">
    <h3>Communicates</h3>
    <i class="fas fa-arrow-right fa-2x"></i>
  </div>

  <!-- Target Column -->
  <div class="col-md-5 d-flex align-items-center">
    <div class="w-100">
      <h4>Target: <a href="/data/observables/{{ target.id }}" class="btn-link">{{ target.id }}</a></h4>
      <div class="table-responsive">
        <table id="targetTable" class="table table-sm table-striped table-bordered">
          <tbody>
            {% for key, value in target.items() %}
            <tr>
              <th>{{ key }}</th>
              <td>{{ value }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<hr>


<a href="/data/traffic" class="btn btn-secondary mt-3">Back to list</a>

<script>
  $(document).ready(function () {
    $('#sourceTable, #targetTable').DataTable({
      paging: false,
      searching: true,
      info: false
    });
  });
</script>
{% endblock %}
